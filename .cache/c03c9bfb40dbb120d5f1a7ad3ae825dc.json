{"dependencies":[{"name":"./Sprite"},{"name":"./SpriteSheet"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Sprite = require(\"./Sprite\");\n\nvar _Sprite2 = _interopRequireDefault(_Sprite);\n\nvar _SpriteSheet = require(\"./SpriteSheet\");\n\nvar _SpriteSheet2 = _interopRequireDefault(_SpriteSheet);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar KEY_CODES = { 37: 'left', 39: 'right', 32: 'fire' };\nvar lastTime = new Date().getTime();\nvar maxTime = 1 / 30;\n\nvar Game = new function () {\n  var boards = [];\n\n  // Game Initialization\n  this.initialize = function (canvasElementId, sprite_data, callback) {\n    this.canvas = document.getElementById(canvasElementId);\n\n    this.playerOffset = 10;\n    this.canvasMultiplier = 1;\n    this.setupMobile();\n\n    this.width = this.canvas.width;\n    this.height = this.canvas.height;\n\n    this.ctx = this.canvas.getContext && this.canvas.getContext('2d');\n    if (!this.ctx) {\n      return alert('Please upgrade your browser to play');\n    }\n\n    this.setupInput();\n\n    this.loop();\n\n    if (this.mobile) {\n      this.setBoard(4, new TouchControls());\n    }\n\n    _SpriteSheet2.default.load(sprite_data, callback);\n  };\n\n  // Handle Input\n  this.keys = {};\n\n  this.setupInput = function () {\n    window.addEventListener('keydown', function (e) {\n      if (KEY_CODES[e.keyCode]) {\n        Game.keys[KEY_CODES[e.keyCode]] = true;\n        e.preventDefault();\n      }\n    }, false);\n\n    window.addEventListener('keyup', function (e) {\n      if (KEY_CODES[e.keyCode]) {\n        Game.keys[KEY_CODES[e.keyCode]] = false;\n        e.preventDefault();\n      }\n    }, false);\n  };\n  // Game Loop\n  this.loop = function () {\n    var curTime = new Date().getTime();\n    requestAnimationFrame(Game.loop);\n    var dt = (curTime - lastTime) / 1000;\n    if (dt > maxTime) {\n      dt = maxTime;\n    }\n\n    for (var i = 0, len = boards.length; i < len; i++) {\n      if (boards[i]) {\n        boards[i].step(dt);\n        boards[i].draw(Game.ctx);\n      }\n    }\n\n    lastTime = curTime;\n  };\n\n  // Change an active game board\n  this.setBoard = function (num, board) {\n    boards[num] = board;\n  };\n\n  this.setupMobile = function () {\n    var container = document.getElementById('container'),\n        hasTouch = !!('ontouchstart' in window),\n        w = window.innerWidth,\n        h = window.innerHeight;\n\n    if (hasTouch) {\n      this.mobile = true;\n    }\n\n    if (screen.width >= 1280 || !hasTouch) {\n      return false;\n    }\n\n    if (w > h) {\n      alert('Please rotate the device and then click OK');\n      w = window.innerWidth;\n      h = window.innerHeight;\n    }\n\n    container.style.height = h * 2 + 'px';\n    window.scrollTo(0, 1);\n\n    h = window.innerHeight + 2;\n    container.style.height = h + 'px';\n    container.style.width = w + 'px';\n    container.style.padding = 0;\n\n    if (h >= this.canvas.height * 1.75 || w >= this.canvas.height * 1.75) {\n      this.canvasMultiplier = 2;\n      this.canvas.width = w / 2;\n      this.canvas.height = h / 2;\n      this.canvas.style.width = w + 'px';\n      this.canvas.style.height = h + 'px';\n    } else {\n      this.canvas.width = w;\n      this.canvas.height = h;\n    }\n\n    this.canvas.style.position = 'absolute';\n    this.canvas.style.left = '0px';\n    this.canvas.style.top = '0px';\n  };\n}();\n\nexports.default = Game;"},"hash":"515decb72c36930b672b85bf629b8176"}